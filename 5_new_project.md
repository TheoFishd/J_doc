[<<Оглавление](0_index.md)
# >> Модуль создания нового проекта

# Пользовательский уровень
Пользователь взаимодействует с модулем создания нового проекта через цепочку [`обработчик телеграм`](3_telegram.md) -> [`обработчик OpenAI`](4_openai.md).  

## Общие принципы
`Обработчик OpenAI` извлекает из сообщений пользователя информацию, нужную для создания проекта, и заполняет сетку данных извлечёнными данными, выставляет дефолтные значения, генерирует сообщения с подсказками пользователю о заполненных и недостающих данных. Когда сетка данных заполнена, модуль генерирует сообщение, в котором предоставляет на проверку все собранные данные и кнопку для запуска системного процесса создания проекта. После создания проекта модуль генерирует отчёт со ссылками на проект и связанные с проектом объекты.  
> Некоторые данные, системные или значения которых выставлены по дефолту, не отображаются в сообщениях пользователю, пока сетка данных, нужных для создания проекта, не будет заполнена полностью.

## Дефолтные поля и скрытые поля
`Внутреннее имя проекта` не фигурирует в ответах пользователю, пока вся сетка данных для создания проекта не будет заполнена полностью, т.к. `Внутреннее имя проекта` становится актуальным только после заполнения всех данных.

`Статус проекта` может иметь два значения: `"Тендер"` и `"В работе"`. По дефолту всем проектам ставится значение `"Тендер"`, и это поле не показывается даже в финальном сообщении, если оно остаётся `"Тендер"`. Тем не менее пользователь при необходимости может изменить значение на `"В работе"`, попросив об этом ассистента.

`Аккаунт директор` устанавливается пользователем, создающим проект, если пользователь явно не указал другого аккаунта.

# Админ уровень
> Список значений для поля `статус проекта` захардкожен.

## Закэшированные данные
В процессе создания проекта [`обработчик OpenAI`](4_openai.md) при сборе информации пользуется закэшированными данными для проверки или приведения к определённому виду значений полей в сетке данных для нового проекта. 

`Имя клиента` — для этого поля используется кэш имён клиентов, полученных из таблицы клиентов, ссылка на которую устанавливается в [настроечной таблице](1_system.md#настроечная-таблица). Имя клиента, полученное от пользователя, сверяется `обработчиком OpenAI` с данными, закэшированными из таблицы клиентов, и либо приводится к виду, в котором клиент фигурирует в таблице клиентов, либо считается новым клиентом (в этом случае в сообщении, сгенерированном для пользователя, рядом с именем клиента ставится пометка, что это новый (отсутствующий в кэше) клиент). А после создания проекта значение поля `имя клиента` добавляется в таблицу клиентов компании.

`Аккаунт директор` устанавливается пользователем, создающим проект, если пользователь явно не указал другого аккаунта. Поле не фигурирует в ответах другого аккаунт-директора.

`Руководитель проекта`

# Код уровень
> Можно разгрузить инструкцию [смотри](/oai.py) #563
