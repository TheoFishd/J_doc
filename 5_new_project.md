[<<Оглавдение](0_index.md)
# >> Модуль создания нового проекта

# Пользовательский уровень
Пользователь взаимодействует с модулем создания новго проекта через цепочку [`обработчик телеграм`](3_telegram.md) -> [`обработчик openai`](4_openai.md).  

## Общие принцыпы
`Обработчик openai` извлекает из сообщений пользователя информацию нужную для создания проекта и заполняет сетку данных извлеченными данными, выставляет дефолтные значения, генерирует сообщения с подсказками пользователю о заполненных и недостающих данных. Когда сетка данных заполненна, модуль генерирует сообщение в котором предоставляет на проверку все собранные данные и кнопку для запуска системного процесса создания проекта. После создания проекта модуль генерирует отчет со ссылками на проект и связанные с проектом объекты.
> Некоторые данные, системные или значения которых выставленны по дефолту, не отображаются в сообщениях пользователю пока сетка данных нужных для создания проекта не будет заполнена полностью.

## Дефолтные поля и скрытые поля
`Внутреннее имя проекта` не фигурирует в ответах пользователю, пока вся сетка данных для создания проекта не будет заполнена полностью, тк. `Внутреннее имя проекта` становится актуальным только после заполнения всех данных.

`Статус проекта` может иметь два значения `"Тендер"` и `"В работе"`. По дефолту всем проектам ставится значение `"Тендер"` и это поле не показывается даже в финальном сообщении, если оно остается `"Тендер"`. Тем не менее пользователь, при надобности может изменить заначение на `"В работе"`, попросив об этом ассистента

`Аккаунт директор` устанавливается пользователь создающий проект, если пользователь явно не указал другого аккаунта.


# Админ уровень
> Список значений для поля `статус проекта` захардкоден

 

## закэшированные данные
В процессе создания проекта [`обработчик openai`](4_openai.md) при сборе информации пользуется закешированными данными для проверки или приведению к определенному виду значений полей в сетке данных для нового проекта. 

`Имя клиента` для этого поля используется кэш имен клиентов полученных из таблицы клиентов, ссылка на которую устанавливается в [настроечной таблице](1_system.md#настроечная-таблица). Имя клиента полученное от пользователя сверяется `Обработчиком openai` с данными закешированными из таблицы клиентов и либо приводится к виду в котором клиент фигурирует в таблице клиентов, либо считается новым клиентом (в этом случае в сообщении сгенерированным для пользователя рядом с именем клиент ставится пометка что это новый (отсутствующий в кэше) клиент). А после создания проекта значение поля `имя клиента` добавляется в таблицу клиентов компании.

`Аккаунт директор` устанавливается пользователь создающий проект, если пользователь явно не указал другого аккаунта. Поле не фигурирует в ответах гругого аккаунт директора.

`Руководитель проекта`

# Код уровень
> можно разгрузить инструкцию [смотри](/oai.py) #563